<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Virtual Town</title>
		<style>
			*{outline:none;font-family:Arial;cursor:default}
			html,body{min-height:100%;margin:0;padding:0;background-color:black;-webkit-user-select:none;-moz-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent;touch-action:none}

			.virtual-town-container{position:fixed;left:0;top:0;right:0;bottom:0;width:100%;height:100%;display:none}
			.virtual-town-canvas{position:fixed;left:0;top:0;right:0;bottom:0}
			.virtual-town-about-label{position:fixed;left:50%;transform:translateX(-50%);white-space:nowrap;bottom:0;z-index:399;margin-bottom:20px;padding:10px;border-radius:10px;text-shadow: 0 0 3px #000000,0 0 7px #000000;font-size:25px;font-weight:bold;color:white;background-color:rgba(0,0,0,0.5);display:none}
			.virtual-town-about-hidden{animation:fadeOut 1.5s;animation-fill-mode:forwards}

			@keyframes fadeOut{0%{opacity:1}99%{opacity:0.01}100%{opacity:0}}
			@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}

			/* iPods and other very small devices (portrait and landscape)(very small) */
			@media screen and (min-width: 0) and (max-width: 320px)
				{
				.virtual-town-about-label{font-size:18px;margin-bottom:10px}
				}

			#virtual-town-joystick{position:fixed;left:0;bottom:0;width:235px;height:265px;display:none}
			.virtual-town-joystick-button{position:fixed;right:0;bottom:0;width:190px;height:190px;display:none;opacity:60%}
			.virtual-town-joystick-button-image{width:150px;height:150px;filter:brightness(80%)}
			.virtual-town-joystick-button-normal{background-image:url("data:image/png;base64,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");background-repeat:no-repeat}
			.virtual-town-joystick-button-pressed{background-image:url("data:image/png;base64,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");background-repeat:no-repeat}

			.virtual-town-pleasewait{position:fixed;width:64px;height:64px;left:0;right:0;top:0;bottom:0;margin:auto auto;border:0}
			.virtual-town-pleasewait-spinner{color:white;display:inline-block;position:relative;width:64px;height:64px}
			.virtual-town-pleasewait-spinner div{transform-origin:32px 32px;animation:virtual-town-pleasewait-spinner 1.2s linear infinite}
			.virtual-town-pleasewait-spinner div:after{content:" ";display:block;position:fixed;top:3px;left:29px;width:5px;height:14px;border-radius:20%;background:white}
			.virtual-town-pleasewait-spinner div:nth-child(1){transform:rotate(0deg);animation-delay:-1.1s}
			.virtual-town-pleasewait-spinner div:nth-child(2){transform:rotate(30deg);animation-delay:-1s}
			.virtual-town-pleasewait-spinner div:nth-child(3){transform:rotate(60deg);animation-delay:-0.9s}
			.virtual-town-pleasewait-spinner div:nth-child(4){transform:rotate(90deg);animation-delay:-0.8s}
			.virtual-town-pleasewait-spinner div:nth-child(5){transform:rotate(120deg);animation-delay:-0.7s}
			.virtual-town-pleasewait-spinner div:nth-child(6){transform:rotate(150deg);animation-delay:-0.6s}
			.virtual-town-pleasewait-spinner div:nth-child(7){transform:rotate(180deg);animation-delay:-0.5s}
			.virtual-town-pleasewait-spinner div:nth-child(8){transform:rotate(210deg);animation-delay:-0.4s}
			.virtual-town-pleasewait-spinner div:nth-child(9){transform:rotate(240deg);animation-delay:-0.3s}
			.virtual-town-pleasewait-spinner div:nth-child(10){transform:rotate(270deg);animation-delay:-0.2s}
			.virtual-town-pleasewait-spinner div:nth-child(11){transform:rotate(300deg);animation-delay:-0.1s}
			.virtual-town-pleasewait-spinner div:nth-child(12){transform:rotate(330deg);animation-delay:0s}
			@keyframes virtual-town-pleasewait-spinner{0%{opacity:1}100%{opacity:0}}
		</style>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=no"/>
	</head>
	<body>
		<div class="virtual-town-container"></div>
		<div class="virtual-town-about-label" id="about"></div>
		<div class="virtual-town-pleasewait"><div class="virtual-town-pleasewait-spinner"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>
		<div id="virtual-town-joystick"></div>
		<div class="virtual-town-joystick-button">
			<div id="virtual-town-joystick-button-state" class="virtual-town-joystick-button-image virtual-town-joystick-button-normal"></div>
		</div>
		<script src="VirtualTownGame.js"></script>
		<script>
			var DEBUG_MODE = false;

			var containerWidth;
			var containerHeight;
			var scene;
			var camera;
			var cameraDirection;
			var renderer;
			var hemisphereLight;
			var directionalLight1;
			var directionalLight2;
			var waterWell = null;

			var hero;
			var heroSpeed = 3;
			var heroDistanceCheck = 5;

			var grassFloor;
			var grassMaterial;
			var grassGeometry;
			var grassTexture;
			var grassLoader;

			var oceanFloor;
			var oceanMaterial;
			var oceanGeometry;
			var oceanTexture;
			var oceanLoader;

			var obstacles = [];

			var keyUpPressed = false;
			var keyDownPressed = false;
			var keyLeftPressed = false;
			var keyRightPressed = false;
			var keySpacePressed = false;

			var userLanguage = window.navigator.userLanguage || window.navigator.language;

			var STRING_ABOUT = "";

			var town_materials = null;
			var town_road = null;
			var town_well = null;
			var town_water_well = null;
			var town_lamp = null;
			var town_door = null;
			var town_wall = null;
			var town_window = null;

			var assets_limit = 7;
			var assets_counter = 0;

			// CHECKING THE USER LANGUAGE
			if (userLanguage.substring(0,2)=="es")
				{
				STRING_ABOUT = "Dise&ntilde;ado por www.lrusso.com";
				}
				else
				{
				STRING_ABOUT = "Designed by www.lrusso.com";
				}

			function create()
				{
				// GETTING THE CONTAINER SIZE
				containerWidth = document.getElementsByClassName("virtual-town-container")[0].offsetWidth;
				containerHeight = document.getElementsByClassName("virtual-town-container")[0].offsetHeight;

				// SETTING THE RENDER CONFIGURATION
				renderer = new THREE.WebGLRenderer({alpha:true});
				renderer.domElement.className = "virtual-town-canvas";
				renderer.setSize(window.innerWidth, window.innerHeight);
				renderer.antialias = false;
				renderer.setClearColor(0xFFFFFF, 0);
				renderer.shadowMap.enabled = true;
				renderer.shadowMapSoft = true;
				renderer.shadowMap.type = THREE.PCFSoftShadowMap;

				// ADDING THE CANVAS INTO THE CONTAINER
				document.getElementsByClassName("virtual-town-container")[0].appendChild(renderer.domElement);

				// CREATING THE SCENE
				scene = new THREE.Scene();

				// ADDING THE CAMERA
				camera = new THREE.PerspectiveCamera(45, containerWidth / containerHeight, 1, 3000);
				camera.position.set(0, 11, 102);
				scene.add(camera);

				// ADDING A VECTOR IN ORDER TO USE IT FOR THE CAMERA DIRECTION
				cameraDirection = new THREE.Vector3();

				// ADDING THE HERO
				hero = new THREE.Mesh(new THREE.BoxGeometry(1,1,1), new THREE.MeshBasicMaterial({color:0x000000}));
				hero.position.y = 10;
				hero.visible = false;
				scene.add(hero);

				// ADDING THE GRASS FLOOR
				grassLoader = new THREE.TextureLoader();
				grassTexture = grassLoader.load(grassImageData, function (texture)
					{
					grassTexture.wrapS = texture.wrapT = THREE.RepeatWrapping;
					grassTexture.offset.set(0,0);
					grassTexture.repeat.set(10,10);
					});
				grassMaterial = new THREE.MeshPhongMaterial({map:grassTexture});
				grassGeometry = new THREE.BoxGeometry(200, 400, 1);
				grassFloor = new THREE.Mesh(grassGeometry, grassMaterial);
				grassFloor.receiveShadow = true;
				grassFloor.rotation.x = 1.570;
				grassFloor.position.x = 0;
				grassFloor.position.y = 1;
				grassFloor.position.z = -90;
				scene.add(grassFloor);

				// ADDING THE OCEAN
				oceanLoader = new THREE.TextureLoader();
				oceanTexture = oceanLoader.load(oceanImageData, function (texture)
					{
					oceanTexture.wrapS = texture.wrapT = THREE.RepeatWrapping;
					oceanTexture.offset.set(0,0);
					oceanTexture.repeat.set(10,10);
					});
				oceanMaterial = new THREE.MeshPhongMaterial( { map: oceanTexture } );
				oceanGeometry = new THREE.BoxGeometry(10000, 10000);
				oceanFloor = new THREE.Mesh(oceanGeometry, oceanMaterial);
				oceanFloor.receiveShadow = true;
				oceanFloor.rotation.x = 1.570;
				oceanFloor.position.x = 0;
				oceanFloor.position.y = -20;
				oceanFloor.position.z = -90;
				scene.add(oceanFloor);

				// ADDING THE LIGHTS
				directionalLight1 = new THREE.DirectionalLight(0xffffff, 0.15);
				directionalLight1.position.set(-60, 99, 0);
				directionalLight2 = new THREE.DirectionalLight(0xffffff, 0.15);
				directionalLight2.position.set(60, 99, 0);
				hemisphereLight = new THREE.HemisphereLight(0xffffff, 0x000000, 1);
				hemisphereLight.position.y = 500;
				scene.add(directionalLight1,directionalLight2,hemisphereLight);

				// ADDING THE ISLAND LIMITS
				var islandLimit1 = new THREE.Mesh(new THREE.BoxGeometry(5,15,400), new THREE.MeshBasicMaterial({color: 0x00ff00}));
				islandLimit1.position.x = -102;
				islandLimit1.position.y = 5;
				islandLimit1.position.z = -90;
				if (DEBUG_MODE==false){islandLimit1.visible = false;}
				scene.add(islandLimit1);
				obstacles.push(islandLimit1);
				var islandLimit2 = new THREE.Mesh(new THREE.BoxGeometry(5,15,400), new THREE.MeshBasicMaterial({color: 0x00ff00}));
				islandLimit2.position.x = 102;
				islandLimit2.position.y = 5;
				islandLimit2.position.z = -90;
				if (DEBUG_MODE==false){islandLimit2.visible = false;}
				scene.add(islandLimit2);
				obstacles.push(islandLimit2);
				var islandLimit3 = new THREE.Mesh(new THREE.BoxGeometry(209,15,5), new THREE.MeshBasicMaterial({color: 0x00ff00}));
				islandLimit3.position.x = 0;
				islandLimit3.position.y = 5;
				islandLimit3.position.z = 110;
				if (DEBUG_MODE==false){islandLimit3.visible = false;}
				scene.add(islandLimit3);
				obstacles.push(islandLimit3);
				var islandLimit4 = new THREE.Mesh(new THREE.BoxGeometry(209,15,5), new THREE.MeshBasicMaterial({color: 0x00ff00}));
				islandLimit4.position.x = 0;
				islandLimit4.position.y = 5;
				islandLimit4.position.z = -292;
				if (DEBUG_MODE==false){islandLimit4.visible = false;}
				scene.add(islandLimit4);
				obstacles.push(islandLimit4);

				// LOADING THE MATERIALS
				new THREE.MTLLoader().load(MTL_FILE, function(materials)
					{
					// PRELOADING THE MATERIALS
					materials.preload();

					// SETTING THE MATERIALS FOR LATER USE
					town_materials = materials;

					// LOADING ALL THE TOWN MODELS
					loadModels();
					});
				}

			function update()
				{
				// SETTING A DELAY FOR PREVENTING A FASTER GAME EXPERIENCE USING NEWER DEVICES
				setTimeout(function()
					{
					// REQUESTING THE FRAME ANIMATION
					requestAnimationFrame(update);
					},1000/40);

				// MOVING THE OCEAN TEXTURE
				oceanTexture.offset.y = oceanTexture.offset.y - 0.0002;

				// MAKING THE HERO TO FOLLOW THE CAMERA
				hero.position.x = camera.position.x;
				hero.position.y = camera.position.y;
				hero.position.z = camera.position.z;
				hero.rotation.x = camera.rotation.x;
				hero.rotation.y = camera.rotation.y;
				hero.rotation.z = camera.rotation.z;

				// CHECKING IF THE WATER WELL WAS CREATED
				if (waterWell!=null)
					{
					// MOVING THE WATER WELL
					waterWell.rotation.y = waterWell.rotation.y + 0.02;
					}

				// CHECKING IF THE UP KEY IS PRESSED
				if (keyUpPressed==true)
					{
					// UPDATING THE CAMERA DIRECTION
					camera.getWorldDirection(cameraDirection);

					// MOVING THE HERO FORWARD
					hero.position.addScaledVector(cameraDirection,heroDistanceCheck);

					// CHECKING IF THE HERO CAN MOVE
					if (detectCollisions()==false)
						{
						// MOVING THE CAMERA FORWARD
						camera.position.addScaledVector(cameraDirection,heroSpeed);
						}
						else
						{
						// RESTORING THE HERO LOCATION
						hero.position.x = camera.position.x;
						hero.position.y = camera.position.y;
						hero.position.z = camera.position.z;
						hero.rotation.x = camera.rotation.x;
						hero.rotation.y = camera.rotation.y;
						hero.rotation.z = camera.rotation.z;
						}
					}

				// CHECKING IF THE DOWN KEY IS PRESSED
				if (keyDownPressed==true)
					{
					// UPDATING THE CAMERA DIRECTION
					camera.getWorldDirection(cameraDirection);

					// MOVING THE HERO BACKWARDS
					hero.position.addScaledVector(cameraDirection,-heroDistanceCheck);

					// CHECKING IF THE HERO CAN MOVE
					if (detectCollisions()==false)
						{
						// MOVING THE CAMERA BACKWARDS
						camera.position.addScaledVector(cameraDirection,-heroSpeed);
						}
						else
						{
						// RESTORING THE HERO LOCATION
						hero.position.x = camera.position.x;
						hero.position.y = camera.position.y;
						hero.position.z = camera.position.z;
						hero.rotation.x = camera.rotation.x;
						hero.rotation.y = camera.rotation.y;
						hero.rotation.z = camera.rotation.z;
						}
					}

				// CHECKING IF THE LEFT KEY IS PRESSED
				if (keyLeftPressed==true)
					{
					camera.rotation.y = camera.rotation.y + 0.05;
					hero.rotation.y = hero.rotation.y + 0.05;
					}

				// CHECKING IF THE RIGHT KEY IS PRESSED
				if (keyRightPressed==true)
					{
					camera.rotation.y = camera.rotation.y - 0.05;
					hero.rotation.y = hero.rotation.y - 0.05;
					}

				// CHECKING IF THE SPACE KEY IS PRESSED
				if (keySpacePressed==true)
					{
					// MAKING THE HERO TO EXECUTE AN ACTION
					heroAction();

					// SETTING THAT SPACE KEY IS NOT PRESSED
					keySpacePressed = false;
					}

				// RENDERING THE SCENE
				renderer.render(scene, camera);
				}

			function loadModels()
				{
				// LOADING THE ROAD MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_ROAD, function(object)
					{
					object.scale.set(10,10,10);
					town_road = object;
					checkAssets();
					});

				// LOADING THE WELL MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_WELL, function(object)
					{
					object.scale.set(13,13,13);
					town_well = object;
					checkAssets();
					});

				// LOADING THE WATER WELL MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_WATER_WELL, function(object)
					{
					object.scale.set(13,13,13);
					town_water_well = object;
					checkAssets();
					});

				// LOADING THE LAMP MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_LAMP, function(object)
					{
					object.scale.set(13,13,13);
					town_lamp = object;
					checkAssets();
					});

				// LOADING THE DOOR MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_DOOR, function(object)
					{
					object.scale.set(13,13,13);
					town_door = object;
					checkAssets();
					});

				// LOADING THE WALL MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_WALL, function(object)
					{
					object.scale.set(13,26,3);
					town_wall = object;
					checkAssets();
					});

				// LOADING THE WINDOW MODEL
				new THREE.OBJLoader().setMaterials(town_materials).load(OBJ_WINDOW, function(object)
					{
					object.scale.set(3,13,13);
					town_window = object;
					checkAssets();
					});
				}

			function checkAssets()
				{
				// UPDATING THE ASSETS COUNTER
				assets_counter = assets_counter + 1;

				// CHECKING IF ALL THE ASSETS ARE LOADED
				if (assets_counter==assets_limit)
					{
					// CREATING TOWN
					createTown();
					}
				}

			function createTown()
				{
				// CREATING THE WELL
				createWell(0,-155);

				// CREATING THE WATER WELL
				createWaterWell(0, -296.5,90);

				// CREATING THE ROAD
				createRoadBlock(15,   20);
				createRoadBlock(15,  -60);
				createRoadBlock(-5, -160);
				createRoadBlock(-5, -140);
				createRoadBlock(-5, -120);
				createRoadBlock(-5, -100);
				createRoadBlock(-5,  -80);
				createRoadBlock(-5,  -60);
				createRoadBlock(-5,  -40);
				createRoadBlock(-5,  -20);
				createRoadBlock(-5,    0);
				createRoadBlock(-5,   20);
				createRoadBlock(-5,   40);
				createRoadBlock(-5,   60);
				createRoadBlock(-5,   80);
				createRoadBlock(-25,  20);
				createRoadBlock(-25, -60);

				// CREATING THE HOUSE 1
				createLamp(-25, 17,0)
				createDoor(-35, 25, 0);
				createWall(-31, 20, -90);
				createWall(-31, 30, -90);
				createWall(-31, 40, -90);
				createWall(-31, 45, -90);
				createWindow(-31, 55, 0);
				createWall(-31, 75, -90);

				createWall(-36, 82, -180);
				createWall(-46, 82, -180);
				createWall(-56, 82, -180);
				createWall(-66, 82, -180);

				createWall(-36, 12, -180);
				createWall(-46, 12, -180);
				createWall(-56, 12, -180);
				createWall(-66, 12, -180);

				createWall(-71, 20, -90);
				createWall(-71, 30, -90);
				createWall(-71, 40, -90);
				createWall(-71, 45, -90);
				createWall(-71, 55, -90);
				createWall(-71, 65, -90);
				createWall(-71, 75, -90);

				// CREATING THE HOUSE 2
				createDoor(35, 25, -180);
				createWall(31, 20, -90);
				createWall(31, 30, -90);
				createWall(31, 40, -90);
				createWall(31, 45, -90);
				createWindow(31, 65, -180);
				createWall(31, 75, -90);

				createWall(36, 82, -180);
				createWall(46, 82, -180);
				createWall(56, 82, -180);
				createWall(66, 82, -180);

				createWall(36, 12, -180);
				createWall(46, 12, -180);
				createWall(56, 12, -180);
				createWall(66, 12, -180);

				createWall(71, 20, -90);
				createWall(71, 30, -90);
				createWall(71, 40, -90);
				createWall(71, 45, -90);
				createWall(71, 55, -90);
				createWall(71, 65, -90);
				createWall(71, 75, -90);

				// CREATING THE HOUSE 3
				createDoor(-35, -55, 0);
				createWall(-31, -20, -90);
				createWall(-31, -50, -90);
				createWindow(-31, -40, 0);
				createWall(-31, -60, -90);
				createWall(-31, -65, -90);

				// CREATING THE HOUSE 4
				createDoor(35, -55, -180);
				createWall(31, -20, -90);
				createWall(31, -50, -90);
				createWindow(31, -25, -180);
				createWall(31, -60, -90);
				createWall(31, -65, -90);
				}

			function createRoadBlock(x,z)
				{
				var newObj = town_road.clone();
				newObj.rotation.y = (90 * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 1.7;
				newObj.position.z = z;
				scene.add(newObj);
				}

			function createWell(x,z)
				{
				var newObj = town_well.clone();
				newObj.rotation.y = (45 * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 1.7;
				newObj.position.z = z;
				obstacles.push(newObj);
				scene.add(newObj);
				}

			function createWaterWell(x,z,rotation)
				{
				var rotationMatrix = new THREE.Matrix4();
				rotationMatrix.set(0 ,0 ,1 , 0, -1 ,0 ,0 , 0, 0 ,1 ,0 , 0, 0 ,0 ,0 , -1);
				waterWell = town_water_well.clone();
				waterWell.quaternion.setFromRotationMatrix( rotationMatrix );
				waterWell.rotation.y = (rotation * Math.PI)/180;
				waterWell.position.x = x;
				waterWell.position.y = 1;
				waterWell.position.z = z;
				obstacles.push(waterWell);
				scene.add(waterWell);
				}

			function createLamp(x,z,rotation)
				{
				var newObj = town_lamp.clone();
				newObj.rotation.y = (rotation * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 10;
				newObj.position.z = z;
				scene.add(newObj);
				}

			function createDoor(x,z,rotation)
				{
				var newObj = town_door.clone();
				newObj.rotation.y = (rotation * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 1;
				newObj.position.z = z;
				obstacles.push(newObj);
				scene.add(newObj);
				}

			function createWindow(x,z,rotation)
				{
				var newObj = town_window.clone();
				newObj.rotation.y = (rotation * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 1;
				newObj.position.z = z;
				obstacles.push(newObj);
				scene.add(newObj);
				}

			function createWall(x,z,rotation)
				{
				var newObj = town_wall.clone();
				newObj.rotation.y = (rotation * Math.PI)/180;
				newObj.position.x = x;
				newObj.position.y = 1;
				newObj.position.z = z;
				obstacles.push(newObj);
				scene.add(newObj);
				}

			function detectCollisions()
				{
				// LOOPING ALL THE OBSTACLES
				for (var i = 0; i < obstacles.length; i ++)
					{
					// CREATING A BOX ARROUND THE HERO CURRENT POSITION
					var heroMeshBox = new THREE.Box3().setFromObject(hero);

					// CREATING A BOX ARROUND THE OBSTACLE CURRENT POSITION
					var obstacleMeshBox = new THREE.Box3().setFromObject(obstacles[i]);

					// CHECKING IF THERE IS AN INTERSECTION BETWEEN TWO BOXES
					if (heroMeshBox.intersectsBox(obstacleMeshBox)==true)
						{
						// RETURNING THAT THERE IS A COLLISION BETWEEN THE HERO AND THE OBSTACLE
						return true;
						}
					}

				// RETURNING THAT THERE IS NO COLLISION
				return false;
				}

			function heroAction()
				{
				// TODO
				}

			function resizeCanvasToFitWindow()
				{
				try
					{
					// UPDATING THE CAMERA ASPECT
					camera.aspect = window.innerWidth / (window.innerHeight);

					// UPDATING THE CAMERA PROJECTION
					camera.updateProjectionMatrix();

					// UPDATING THE RENDERING SIZE
					renderer.setSize(window.innerWidth, window.innerHeight);
					}
					catch(err)
					{
					}
				}

			// CREATING THE SCENE
			create();

			window.oncontextmenu = function()
				{
				// DISABLING THE CONTEXT MENU
				return false;
				}

			window.addEventListener("resize", function()
				{
				// RESIZING THE CANVAS TO FIT THE WINDOW
				resizeCanvasToFitWindow();
				});

			window.addEventListener("load", function()
				{
				// SETTING WHAT WILL HAPPEN WHEN THE USER IS PRESSING A KEY
				window.addEventListener("keydown", function ()
					{
					if (event.keyCode === 37 || event.keyCode === 65) // LEFT KEY OR A
						{
						// SETTING THAT THE LEFT KEY IS PRESSED
						keyLeftPressed = true;
						}
					else if (event.keyCode === 39 || event.keyCode === 68) // RIGHT KEY OR D
						{
						// SETTING THAT THE RIGHT KEY IS PRESSED
						keyRightPressed = true;
						}
					else if (event.keyCode === 38 || event.keyCode === 87) // RIGHT KEY OR W
						{
						// SETTING THAT THE UP KEY IS PRESSED
						keyUpPressed = true;
						}
					else if (event.keyCode === 40 || event.keyCode === 83) // RIGHT KEY OR S
						{
						// SETTING THAT THE DOWN KEY IS PRESSED
						keyDownPressed = true;
						}
					else if (event.keyCode === 32) // SPACE KEY
						{
						// SETTING THAT THE SPACE KEY IS PRESSED
						keySpacePressed = true;
						}
					});

				// SETTING WHAT WILL HAPPEN WHEN THE USER STOPS TO PRESSING A KEY
				window.addEventListener("keyup", function ()
					{
					if (event.keyCode === 37 || event.keyCode === 65) // LEFT KEY OR A
						{
						// SETTING THAT THE LEFT KEY IS NOT PRESSED
						keyLeftPressed = false;
						}
					else if (event.keyCode === 39 || event.keyCode === 68) // RIGHT KEY OR D
						{
						// SETTING THAT THE RIGHT KEY IS NOT PRESSED
						keyRightPressed = false;
						}
					else if (event.keyCode === 38 || event.keyCode === 87) // RIGHT KEY OR W
						{
						// SETTING THAT THE UP KEY IS NOT PRESSED
						keyUpPressed = false;
						}
					else if (event.keyCode === 40 || event.keyCode === 83) // RIGHT KEY OR S
						{
						// SETTING THAT THE DOWN KEY IS NOT PRESSED
						keyDownPressed = false;
						}
					else if (event.keyCode === 32) // SPACE KEY
						{
						// SETTING THAT THE SPACE KEY IS NOT PRESSED
						keySpacePressed = false;
						}
					});

				// SETTING WHAT WILL HAPPEN WHEN THE WINDOW IS ON BLUR
				window.addEventListener("blur", function ()
					{
					// DISABLING ANY PRESSED KEY
					keyUpPressed = false;
					keyDownPressed = false;
					keyLeftPressed = false;
					keyRightPressed = false;
					});

				// SETTING WHAT WILL HAPPEN WHEN THE USER TOUCHES THE JOYSTICK BUTTON
				document.getElementsByClassName("virtual-town-joystick-button")[0].addEventListener("touchstart", function ()
					{
					// UPDATING THE JOYSTICK BUTTON IMAGE TO PRESSED
					document.getElementById("virtual-town-joystick-button-state").className = "virtual-town-joystick-button-image virtual-town-joystick-button-pressed";

					// SETTING THAT THE SPACE KEY IS PRESSED
					keySpacePressed = true;
					});

				// SETTING WHAT WILL HAPPEN WHEN THE USER STOPS TOUCHING THE JOYSTICK BUTTON
				document.getElementsByClassName("virtual-town-joystick-button")[0].addEventListener("touchend", function ()
					{
					// UPDATING THE JOYSTICK BUTTON IMAGE TO NORMAL
					document.getElementById("virtual-town-joystick-button-state").className = "virtual-town-joystick-button-image virtual-town-joystick-button-normal";

					// SETTING THAT THE SPACE KEY IS NOT PRESSED
					keySpacePressed = false;
					});

				// CHECKING IF IT IS A MOBILE DEVICE
				if (isMobileDevice()==true)
					{
					// SHOWING THE VIRTUAL JOYSTICK CONTAINER
					document.getElementById("virtual-town-joystick").style.display = "block";

					// SHOWING THE VIRTUAL JOYSTICK BUTTON CONTAINER
					document.getElementsByClassName("virtual-town-joystick-button")[0].style.display = "block";

					// CREATING THE VIRTUAL JOYSTICK
					var joystick = new JoyStick("virtual-town-joystick");

					// HANDLING THE VIRTUAL JOYSTICK
					setInterval(function()
						{
						// GETTING THE JOYSTICK DIRECTION
						var joystickDirection = joystick.GetDir();

						// CHECKING THE JOYSTICK DIRECTION
						switch(joystickDirection)
							{
							case "N":
							keyUpPressed = true;
							keyDownPressed = false;
							keyLeftPressed = false;
							keyRightPressed = false;
							break;

							case "S":
							keyUpPressed = false;
							keyDownPressed = true;
							keyLeftPressed = false;
							keyRightPressed = false;
							break;

							case "W":
							keyUpPressed = false;
							keyDownPressed = false;
							keyLeftPressed = true;
							keyRightPressed = false;
							break;

							case "E":
							keyUpPressed = false;
							keyDownPressed = false;
							keyLeftPressed = false;
							keyRightPressed = true;
							break;

							case "NW":
							keyUpPressed = true;
							keyDownPressed = false;
							keyLeftPressed = true;
							keyRightPressed = false;
							break;

							case "NE":
							keyUpPressed = true;
							keyDownPressed = false;
							keyLeftPressed = false;
							keyRightPressed = true;
							break;

							case "SE":
							keyUpPressed = false;
							keyDownPressed = true;
							keyLeftPressed = false;
							keyRightPressed = true;
							break;

							case "SW":
							keyUpPressed = false;
							keyDownPressed = true;
							keyLeftPressed = true;
							keyRightPressed = false;
							break;

							default:
							keyUpPressed = false;
							keyDownPressed = false;
							keyLeftPressed = false;
							keyRightPressed = false;
							break;
							}
						}, 25);
					}

				// UPDATING THE ABOUT LABEL
				document.getElementById("about").innerHTML = STRING_ABOUT;

				// HIDING THE LOADING SPLASH
				document.getElementsByClassName("virtual-town-pleasewait")[0].style.display = "none";

				// SHOWING THE GAME CONTAINER
				document.getElementsByClassName("virtual-town-container")[0].style.display = "block";

				// SHOWING THE ABOUT BOX
				document.getElementById("about").style.display = "block";

				// UPDATING THE SCENE
				update();

				// RESIZING THE CANVAS TO FIT THE WINDOW
				resizeCanvasToFitWindow();

				// FADING OUT THE ABOUT BOX
				setTimeout(function()
					{
					document.getElementById("about").className = "virtual-town-about-label virtual-town-about-hidden";
					}, 3000);

				// HIDING THE ABOUT BOX
				setTimeout(function()
					{
					document.getElementById("about").style.display = "none";
					}, 4500);
				});

			if ("serviceWorker" in navigator)
				{
				navigator.serviceWorker.register("worker.js").then(function(registration)
					{
					// Registration successful
					//console.log("ServiceWorker registration successful with scope: " + registration.scope);
					}).catch(function(err)
					{
					// Registration failed
					//console.log("ServiceWorker registration failed: " + err);
					});
				}
		</script>
	</body>
</html>